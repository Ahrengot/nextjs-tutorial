{"version":3,"file":"static/webpack/static/development/pages/shows.js.259c65ec6620ab9b7e62.hot-update.js","sources":["webpack:///./pages/shows/index.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport PageLayout from \"../../components/PageLayout\";\nimport fetch from \"isomorphic-unfetch\";\nimport { Show } from \"../../types/show\";\n\nconst ShowItem = ({ show }: Show) => (\n  <article>\n    {show.image && <img src={show.image.medium} alt={show.name} className=\"card-img-top\" />}\n    <div className=\"card-body\">\n      <h3 className=\"card-title h5\">{show.name}</h3>\n      <div className=\"card-text\" dangerouslySetInnerHTML={{ __html: show.summary }} />\n    </div>\n  </article>\n);\n\nconst ShowSearchPage = () => {\n  const [didSearch, setDidSearch] = useState(false);\n  const [results, setResults] = useState<Show[]>([]);\n  const [isLoading, setLoading] = useState(false);\n  const [query, setQuery] = useState(\"\");\n\n  const search = async (e:React.FormEvent) => {\n    e.preventDefault();\n\n    if (isLoading || !query) {\n      return;\n    }\n    \n    setResults([]);\n    setLoading(true);\n    setDidSearch(false);\n    \n    const res = await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(query)}`);\n    const data = await res.json();\n    \n\n    setLoading(false);\n    setResults(data);\n    setDidSearch(true);\n  }\n\n  useEffect(() => {\n    if (didSearch) {\n      setDidSearch(false);\n    }\n  }, [query]);\n\n  return (\n    <PageLayout>\n      <h1>Search for movies</h1>\n      <form onSubmit={search} className=\"mb-4\">\n        <fieldset disabled={isLoading}>\n          <input\n            type=\"search\"\n            className=\"form-control rounded-pill\"\n            value={query}\n            placeholder=\"Enter search phrase...\"\n            onChange={e => setQuery(e.target.value)}\n            autoFocus\n            required\n          />\n        </fieldset>\n      </form>\n      {results.length === 0 && didSearch && <p className=\"mt-3 text-danger\">No results :(</p>}\n      {results && (\n        <div className=\"card-grid\">\n          {results.map(movie => (\n            <Link href=\"/shows/[id]\" as={`/shows/${movie.show.id}`}>\n              <a className=\"card text-reset text-decoration-none\">\n                <ShowItem {...movie} />\n              </a>\n            </Link>\n          ))}\n        </div>\n      )}\n      <style jsx>{`\n        .card-grid {\n          display: grid;\n          grid-template-columns: repeat(1, 1fr);\n          gap: 0.85rem;\n        }\n\n        @media (min-width: 550px) {\n          .card-grid {\n            grid-template-columns: repeat(2, 1fr);\n          }\n        }\n\n        @media (min-width: 720px) {\n          .card-grid {\n            grid-template-columns: repeat(3, 1fr);\n          }\n        }\n\n        @media (min-width: 1150px) {\n          .card-grid {\n            grid-template-columns: repeat(4, 1fr);\n          }\n        }\n      `}</style>\n    </PageLayout>\n  );\n}\n\nexport default ShowSearchPage;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AACA;AASA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAOA;AACA;AACA;AATA;AAAA;AACA;AADA;AAWA;AAXA;AAAA;AACA;AADA;AAYA;AAGA;AACA;AACA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAmBA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAlBA;AAAA;AAAA;AAsDA;AACA;AACA;;;;A","sourceRoot":""}